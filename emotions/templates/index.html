<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotion Detector</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- Container for content -->
    <div class="container">
        <h1>Real-time Face Emotion Detector</h1>
    
        <!-- Video Feed Section -->
        <div class="video-container">
            <img id="video_feed" src="{{ url_for('video_feed') }}" width="640px" height="480px">
        </div>
    
        <!-- Real-time Emotion Display -->
        <p id="live-result">üòä Real-time Emotion: <strong style="color: #ffcc00;">{{ current_emotion if current_emotion else 'Waiting...' }}</strong></p>
    
        <hr style="margin: 30px 0; border-color: #ff4444;">
        <div class="separator-line"></div>
        <!-- Upload Section -->
        <div class="upload-form-wrapper">
            <h2>Upload Image for Emotion Detection</h2>
    
            <form id="upload-form" enctype="multipart/form-data" method="POST" action="/upload">
                <input type="file" name="image" id="image-input" accept="image/*" required>
                <br><br>
                <img id="image-preview" alt="Preview" />
                <br><br>
                <button type="submit">Detect Emotion</button>
            </form>
        </div>
    
        <!-- Display Uploaded Image and Emotion Result -->
        {% if uploaded_result %}
        <div class="upload-section">
            <h2>Uploaded Image Result</h2>
            <img src="{{ uploaded_image }}" class="uploaded-image" alt="Uploaded Image Preview">
            <p id="upload-result">üñºÔ∏è Emotion Detected: <strong style="color: #00ccff;">{{ uploaded_result }}</strong></p>
        </div>
        {% endif %}
    </div>

    <!-- Grainy dots background animation -->
    <div class="grain-dots">
        <span></span>
        <span></span>
        <span></span>
        <!-- Add more if needed -->
    </div>

    <!-- JS for Image Preview Before Upload -->
    <script>
        document.getElementById('image-input').addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
                const preview = document.getElementById('image-preview');
                preview.src = URL.createObjectURL(file);
                preview.style.display = 'block';
            }
        });
    </script>    
</body>
</html>
